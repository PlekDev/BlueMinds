<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Completa tu Perfil - BlueMinds</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top right, #1e40af, #1e3a8a, #020617);
            color: white;
            min-height: 100vh;
        }
        .glass {
            background: rgba(30, 64, 175, 0.18);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
        }
        .btn-gradient {
            background: linear-gradient(to right, #1e40af, #3b82f6);
        }
        .btn-gradient:hover {
            background: linear-gradient(to right, #1e3a8a, #2563eb);
        }
        input, select {
            transition: all 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.3);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-6 bg-gradient-to-br from-slate-950 via-blue-950 to-indigo-950">
    <div class="max-w-lg w-full glass rounded-3xl p-10 md:p-12 shadow-2xl transform transition-all duration-500 hover:scale-[1.01]">
        <!-- Logo y Título -->
        <div class="text-center mb-10">
            <div class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl mb-6 shadow-2xl shadow-blue-500/40 mx-auto">
                <img src="android-chrome-512x512.png" alt="BlueMinds Logo" class="w-16 h-16 object-contain">
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3 tracking-tight">
                Completa tu Perfil
            </h1>
            <p class="text-blue-200/80 text-lg md:text-xl max-w-md mx-auto">
                Para personalizar tu experiencia en BlueMinds y cumplir con los requisitos, necesitamos estos datos.
            </p>
        </div>

        <!-- Formulario -->
        <form id="onboardingForm" class="space-y-8">
            <!-- Fecha de Nacimiento -->
            <div class="space-y-3">
                <label class="block text-sm font-medium text-blue-200 tracking-wide uppercase">
                    Fecha de Nacimiento
                </label>
                <div class="relative">
                    <input 
                        type="date" 
                        id="birth" 
                        required 
                        class="w-full px-5 py-4 bg-slate-900/60 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 transition-all text-lg"
                    >
                   
                </div>
            </div>

            <!-- País (Dropdown) -->
            <div class="space-y-3">
                <label class="block text-sm font-medium text-blue-200 tracking-wide uppercase">
                    País
                </label>
                <select 
                    id="country" 
                    required 
                    class="w-full px-5 py-4 bg-slate-900/60 border border-slate-700 rounded-xl text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 transition-all text-lg appearance-none"
                >
                    <option value="" disabled selected>Selecciona tu país</option>
                    <option value="México">México</option>
                    <option value="Argentina">Argentina</option>
                    <option value="Bolivia">Bolivia</option>
                    <option value="Brasil">Brasil</option>
                    <option value="Chile">Chile</option>
                    <option value="Colombia">Colombia</option>
                    <option value="Costa Rica">Costa Rica</option>
                    <option value="Ecuador">Ecuador</option>
                    <option value="El Salvador">El Salvador</option>
                    <option value="España">España</option>
                    <option value="Estados Unidos">Estados Unidos</option>
                    <option value="Guatemala">Guatemala</option>
                    <option value="Honduras">Honduras</option>
                    <option value="Nicaragua">Nicaragua</option>
                    <option value="Panamá">Panamá</option>
                    <option value="Paraguay">Paraguay</option>
                    <option value="Perú">Perú</option>
                    <option value="República Dominicana">República Dominicana</option>
                    <option value="Uruguay">Uruguay</option>
                    <option value="Venezuela">Venezuela</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>

            <!-- Botón Continuar -->
            <button 
                type="submit" 
                id="submitBtn"
                class="w-full btn-gradient text-white py-5 rounded-xl font-bold text-lg shadow-xl shadow-blue-700/40 hover:shadow-2xl hover:shadow-blue-700/60 transition-all duration-300 transform hover:-translate-y-1 active:scale-95 flex items-center justify-center gap-3 disabled:opacity-70 disabled:cursor-not-allowed"
            >
                <span>Continuar</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </form>

        <!-- Footer -->
        <p class="text-center text-blue-300/50 text-sm mt-10">
            BlueMinds • Educación Inclusiva con IA • 2025-2026
        </p>
    </div>

    <script src="api.js"></script>
    <script>
        const form = document.getElementById('onboardingForm');
        const submitBtn = document.getElementById('submitBtn');
        const originalBtnHTML = submitBtn.innerHTML;

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const birth = document.getElementById('birth').value;
            const country = document.getElementById('country').value.trim();

            if (!birth || !country) {
                alert('Por favor completa todos los campos');
                return;
            }

            // Deshabilitar y mostrar loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Guardando...';

            try {
                const result = await api.completeProfile(birth, country);
                console.log('Perfil completado:', result);
                window.location.href = 'pages/perfil.html';
            } catch (error) {
                alert('Error al guardar: ' + (error.message || 'Intenta nuevamente'));
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalBtnHTML;
            }
        });
    </script>
</body>
</html>