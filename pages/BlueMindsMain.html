<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlueMinds - Neuro Play World</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/welcome.css">
</head>
<body>


    <!-- Pantalla Principal -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="https://plekdev.github.io/BlueMinds/" style="color: inherit; text-decoration: none; display: flex; align-items: center;">
                        <img src="../android-chrome-512x512.png" style="width: 2rem; height: 2rem; margin-right: 1rem;" />
                        <span style="color: #01B3E1;">BlueMinds</span>
                    </a>
                </div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="#" onclick="showPage('home')">Inicio</a></li>
                        <li><a href="#" onclick="showPage('games')">Juegos</a></li>
                        <li><a href="#" onclick="showPage('test')">Test</a></li>
                        <li><a href="#" onclick="showPage('about')">Acerca de</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

        <main>
            <div class="container">
                <!-- Sección de Progreso General -->
                <section class="overall-progress">
                    <div class="progress-header">
                        <h2>Progreso del día</h2>
                        <span class="progress-count">7 / 10 tareas</span>
                    </div>
                    <div class="level-path">
                        <div class="level-path-progress" style="width: 70%;"></div>
                        <div class="flag-item completed">
                            <div class="flag-circle">
                                <i class="fas fa-flag-checkered"></i>
                            </div>
                            <span class="flag-label">Inicio</span>
                        </div>
                        <div class="flag-item completed">
                            <div class="flag-circle">
                                <i class="fas fa-flag"></i>
                            </div>
                            <span class="flag-label">Nivel 1</span>
                        </div>
                        <div class="flag-item completed">
                            <div class="flag-circle">
                                <i class="fas fa-flag"></i>
                            </div>
                            <span class="flag-label">Nivel 2</span>
                        </div>
                        <div class="flag-item current">
                            <div class="flag-circle">
                                <i class="fas fa-flag"></i>
                            </div>
                            <span class="flag-label">Nivel 3</span>
                        </div>
                        <div class="flag-item">
                            <div class="flag-circle">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <span class="flag-label">Meta</span>
                        </div>
                    </div>
                </section>

                <!-- Sección de Categorías -->
                <section class="categories-section">
                    <div class="category-card language" onclick="showCategoryGames('lenguaje')">
                        <div class="category-icon">
                            <i class="fas fa-language"></i>
                        </div>
                        <h3 class="category-title">Lenguaje</h3>
                        <p class="category-description">Aprende nuevas palabras y mejora tu comunicación</p>
                        <div class="category-level-path">
                            <div class="category-level-progress" style="width: 65%;"></div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag">
                                <i class="fas fa-trophy"></i>
                            </div>
                        </div>
                        <div class="stars">
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="far fa-star star"></i>
                            <i class="far fa-star star"></i>
                        </div>
                    </div>

                    <div class="category-card behavior" onclick="showCategoryGames('conducta')">
                        <div class="category-icon">
                            <i class="fas fa-smile-beam"></i>
                        </div>
                        <h3 class="category-title">Conducta</h3>
                        <p class="category-description">Desarrolla habilidades sociales y emocionales</p>
                        <div class="category-level-path">
                            <div class="category-level-progress" style="width: 80%;"></div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag">
                                <i class="fas fa-trophy"></i>
                            </div>
                        </div>
                        <div class="stars">
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="far fa-star star"></i>
                        </div>
                    </div>

                    <div class="category-card occupational" onclick="showCategoryGames('ocupacional')">
                        <div class="category-icon">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <h3 class="category-title">Ocupacional</h3>
                        <p class="category-description">Explora diferentes profesiones y actividades</p>
                        <div class="category-level-path">
                            <div class="category-level-progress" style="width: 45%;"></div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag completed">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="category-flag">
                                <i class="fas fa-trophy"></i>
                            </div>
                        </div>
                        <div class="stars">
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="far fa-star star"></i>
                            <i class="far fa-star star"></i>
                            <i class="far fa-star star"></i>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Sección de Juegos por Categoría (se crea dinámicamente) -->
    <div id="categoryGamesSection" class="category-games-section" style="display: none;">
        <!-- El contenido se cargará dinámicamente -->
    </div>

    <script src="../games/game-list.js"></script>
    <script>
        // Verificar el estado del usuario
        function checkUserStatus() {
            const hasCompletedTest = localStorage.getItem('blueminds_test_completed') === 'true';
            const userType = localStorage.getItem('blueminds_user_type');
            
            if (hasCompletedTest) {
                // Si ya completó el test, mostrar la pantalla principal
                showMainScreen();
                
                // Personalizar saludo según tipo de usuario
                if (userType === 'child') {
                    document.getElementById('userName').textContent = 'Hola, Niño!';
                } else if (userType === 'parent') {
                    document.getElementById('userName').textContent = 'Hola, Padre!';
                }
            } else {
                // Si no, mostrar la pantalla de bienvenida
                document.getElementById('welcomeScreen').style.display = 'flex';
                document.getElementById('mainScreen').style.display = 'none';
            }
        }

        // Ir al selector de test
        function goToTestSelector() {
            window.location.href = 'test-selector.html';
        }

        // Mostrar pantalla principal
        function showMainScreen() {
            // Ocultar cualquier sección de juegos por categoría
            const categoryScreen = document.getElementById('categoryGamesScreen');
            if (categoryScreen) {
                categoryScreen.remove();
            }
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('mainScreen').style.display = 'block';
            
            // Marcar que el usuario ha completado el test (si no lo está ya)
            if (localStorage.getItem('blueminds_test_completed') !== 'true') {
                localStorage.setItem('blueminds_test_completed', 'true');
            }
            
            // Animar progreso
            setTimeout(() => {
                animateMainProgress();
            }, 300);
        }

        // Animaciones de la pantalla principal
        function animateMainProgress() {
            const progressBar = document.querySelector('.level-path-progress');
            if (progressBar) {
                progressBar.style.width = '0%';
                
                setTimeout(() => {
                    progressBar.style.width = '70%';
                }, 300);
            }

            const categoryProgresses = document.querySelectorAll('.category-level-progress');
            categoryProgresses.forEach(progress => {
                const targetWidth = progress.style.width;
                progress.style.width = '0%';
                setTimeout(() => {
                    progress.style.width = targetWidth;
                }, 500);
            });
        }

        function animateCard(card) {
            card.style.transform = 'scale(0.95)';
            setTimeout(() => {
                card.style.transform = '';
            }, 200);
        }

        // Inicializar al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            checkUserStatus();
        });
    </script>
</body>
</html>